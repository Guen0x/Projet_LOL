<div class="detail-container" *ngIf="!loadingChampion && champion">
    <!-- Back button -->
    <a routerLink="/champions" class="back-link">
        <mat-icon>arrow_back</mat-icon>
        <span>Retour aux champions</span>
    </a>

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="hero-left">
            <div class="champion-avatar">
                <span class="avatar-letter">{{ champion.name.charAt(0) }}</span>
            </div>
            <div class="hero-info">
                <h1 class="champion-name">{{ champion.name }}</h1>
                <p class="champion-title">{{ champion.title }}</p>
                <div class="champion-tags">
                    <span *ngFor="let tag of champion.tags" class="tag-badge"
                        [style.background]="roleColors[tag] + '18'" [style.color]="roleColors[tag]"
                        [style.borderColor]="roleColors[tag] + '55'">
                        <mat-icon class="tag-icon">{{ roleIcons[tag] }}</mat-icon>
                        {{ tag }}
                    </span>
                </div>
            </div>
        </div>
        <div class="hero-meta">
            <div class="meta-item">
                <span class="meta-label">ID</span>
                <span class="meta-value">{{ champion.id }}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Clé</span>
                <span class="meta-value mono">{{ champion.key }}</span>
            </div>
        </div>
    </div>

    <!-- Stats Loading -->
    <div class="stats-loading" *ngIf="loadingStats">
        <mat-spinner diameter="36"></mat-spinner>
        <span>Analyse des 10 000+ parties...</span>
    </div>

    <!-- Stats Section -->
    <div class="stats-section" *ngIf="!loadingStats && stats">
        <h2 class="section-title">
            <mat-icon>bar_chart</mat-icon>
            Statistiques en Ranked
        </h2>

        <div class="stats-grid">
            <div class="stat-card accent">
                <span class="stat-value">{{ stats.gamesPlayed | number }}</span>
                <span class="stat-label">Parties jouées</span>
            </div>
            <div class="stat-card" [class.win]="stats.winRate >= 50" [class.lose]="stats.winRate < 50">
                <span class="stat-value">{{ stats.winRate }}%</span>
                <span class="stat-label">Win Rate</span>
            </div>
            <div class="stat-card accent">
                <span class="stat-value">{{ stats.pickRate }}%</span>
                <span class="stat-label">Pick Rate</span>
            </div>
            <div class="stat-card" [class.hot]="stats.banRate > 20">
                <span class="stat-value">{{ stats.banRate }}%</span>
                <span class="stat-label">Ban Rate</span>
            </div>
        </div>

        <!-- Win/Loss bar -->
        <div class="winloss-section">
            <h3 class="sub-title">Victoires / Défaites</h3>
            <div class="winloss-bar">
                <div class="bar-fill win-fill"
                    [style.width.%]="stats.gamesPlayed > 0 ? (stats.wins / stats.gamesPlayed) * 100 : 50">
                    <span class="bar-text" *ngIf="stats.wins > 0">{{ stats.wins }}V</span>
                </div>
                <div class="bar-fill loss-fill"
                    [style.width.%]="stats.gamesPlayed > 0 ? (stats.losses / stats.gamesPlayed) * 100 : 50">
                    <span class="bar-text" *ngIf="stats.losses > 0">{{ stats.losses }}D</span>
                </div>
            </div>
        </div>

        <!-- Extra stats -->
        <div class="extra-stats">
            <div class="extra-card">
                <mat-icon class="extra-icon blue">groups</mat-icon>
                <div class="extra-info">
                    <span class="extra-value">{{ stats.team1Picks | number }}</span>
                    <span class="extra-label">Côté Bleu</span>
                </div>
            </div>
            <div class="extra-card">
                <mat-icon class="extra-icon red">groups</mat-icon>
                <div class="extra-info">
                    <span class="extra-value">{{ stats.team2Picks | number }}</span>
                    <span class="extra-label">Côté Rouge</span>
                </div>
            </div>
            <div class="extra-card">
                <mat-icon class="extra-icon gold">timer</mat-icon>
                <div class="extra-info">
                    <span class="extra-value">{{ stats.avgGameDuration }}</span>
                    <span class="extra-label">Durée moyenne</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Loading Champion -->
<div class="loading-overlay" *ngIf="loadingChampion">
    <mat-spinner diameter="60"></mat-spinner>
    <p>Chargement du champion...</p>
</div>